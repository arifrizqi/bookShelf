document.addEventListener("DOMContentLoaded",function(){let b=document.getElementById("input-buku");b.addEventListener("submit",function(b){b.preventDefault(),function(){var b,c,d,f,g;let h=document.getElementById("input-judul-buku").value,i=document.getElementById("input-penulis-buku").value,j=document.getElementById("input-tahun-buku").value,k=document.getElementById("selesai-dibaca-check").checked,m=+new Date,n=(b=m,c=h,d=i,f=j,g=k,{id:b,title:c,author:d,year:f,isComplated:g});e.push(n),document.dispatchEvent(new Event(a)),l()}()});let e=[],a="render-todo";function f(b){let h=document.createElement("h2");h.classList.add("namaBuku"),h.innerHTML=b.title;let l=document.createElement("p");l.innerHTML="Penulis: "+b.author;let m=document.createElement("p");m.innerHTML="Tahun: "+b.year;let k=document.createElement("div");k.classList.add("inner"),k.append(h,l,m);let a=document.createElement("div");if(a.classList.add("isinya","shadow"),a.append(k),a.setAttribute("id",`todo-${b.id}`),b.isComplated){let c=document.createElement("button");c.classList.add("undo-button"),c.innerText="Belum selesai dibaca",c.addEventListener("click",function(){j(b.id)});let d=document.createElement("button");d.classList.add("trash-button"),d.innerText="Hapus",d.addEventListener("click",function(){i(b.id)}),a.append(c,d)}else{let e=document.createElement("button");e.classList.add("check-button"),e.innerText="Selesai dibaca",e.addEventListener("click",function(){g(b.id)}),a.append(e);let f=document.createElement("button");f.classList.add("trash-button"),f.innerText="Hapus",f.addEventListener("click",function(){i(b.id)}),a.append(f)}return a}function g(c){let b=h(c);null!=b&&(b.isComplated=!0,document.dispatchEvent(new Event(a)),l())}function h(b){for(let a of e)if(a.id===b)return a;return null}function i(c){let b=k(c);-1!==b&&(e.splice(b,1),document.dispatchEvent(new Event(a)),l())}function j(c){let b=h(c);null!=b&&(b.isComplated=!1,document.dispatchEvent(new Event(a)),l())}function k(b){for(let a in e)if(e[a].id===b)return a;return -1}document.addEventListener(a,function(){let a=document.getElementById("todos");for(let b of(a.innerHTML="",e)){let c=f(b);a.append(c)}}),document.addEventListener(a,function(){let a=document.getElementById("todos");a.innerHTML="";let b=document.getElementById("complated-todos");for(let c of(b.innerHTML="",e)){let d=f(c);c.isComplated?b.append(d):a.append(d)}});let c=document.getElementById("cari-buku");function l(){{let a=JSON.stringify(e);localStorage.setItem(m,a),document.dispatchEvent(new Event(d))}}c.addEventListener("submit",function(a){a.preventDefault(),function(){let a=document.getElementById("cari-judul"),c=a.value.toLowerCase(),b=document.querySelectorAll(".isinya > .inner");b.forEach(a=>{a.textContent.toLowerCase().includes(c.toLowerCase())?a.parentElement.removeAttribute("style"):a.parentElement.style.display="none"})}()});let d="saved-todos",m="TODOS_APPS";document.addEventListener(d,function(){alert("Berhasil diproses")}),function(){let c=localStorage.getItem(m),b=JSON.parse(c);if(null!==b)for(let d of b)e.push(d);document.dispatchEvent(new Event(a))}()})